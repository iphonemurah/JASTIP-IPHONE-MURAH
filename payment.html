<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ringkasan Pesanan - Jastip iPhone</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0c;
  --card:#111;
  --text:#fff;
  --accent:#00cc66;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Inter', sans-serif;
  background: linear-gradient(160deg,#060607,var(--bg));
  color: var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:20px;
}
.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), var(--card));
  padding:24px;
  border-radius:16px;
  max-width:500px;
  width:100%;
  box-shadow:0 12px 40px rgba(0,0,0,0.6);
  backdrop-filter: blur(10px);
  border:1px solid rgba(255,255,255,0.08);
  transition: transform .25s ease;
}
.card:hover{transform: translateY(-4px);}
h2{
  margin-top:0;
  margin-bottom:16px;
  color: var(--accent);
  text-align:center;
  font-size:24px;
}
img{
  width:100%;
  border-radius:12px;
  margin-bottom:12px;
  transition: transform .3s ease;
}
img:hover{transform: scale(1.03);}
p{margin:6px 0; font-size:15px;}
.glass-btn{
  display:inline-flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  padding:10px 14px;
  margin-top:12px;
  width:100%;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  text-decoration:none;
  text-align:center;
  backdrop-filter: blur(8px);
  transition: transform .15s, box-shadow .15s, background .25s;
}
.glass-btn:hover{transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.5);}
.glass-btn.primary{
  background: rgba(255,255,255,0.18); 
  color: #000; 
  border:1px solid rgba(255,255,255,0.25);
}
.glass-btn.primary.paid{
  background: #00cc66; 
  color:#fff; 
  border:1px solid #00cc66;
}
.glass-btn.wa{
  background: #25D366; 
  color:#fff; 
  border:1px solid #1DA851;
}
.checkmark{
  display:inline-block;
  width:18px;
  height:18px;
  border-radius:50%;
  background:#000;
  mask: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M20.285 6.709l-11.025 11.025-5.57-5.57 1.414-1.414 4.156 4.155 9.611-9.612z"/></svg>') no-repeat center;
  mask-size: cover;
  margin-left:8px;
}

/* Modal popup QRIS */
#paymentModal{
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.6);
  justify-content:center;
  align-items:center;
  z-index:1000;
}
#paymentModal .modalContent{
  background:#111;
  padding:20px;
  border-radius:16px;
  max-width:400px;
  width:90%;
  position:relative;
  text-align:center;
}
#closeModal{
  position:absolute;
  top:10px; right:14px;
  cursor:pointer;
  font-size:24px;
  color:#fff;
}
#paymentModal img{
  width:200px;
  border-radius:12px;
  margin-bottom:12px;
}
#paymentModal p{
  color:#fff;
  font-size:15px;
}
.payment-methods{margin-top:16px;}
.payment-methods p{margin-bottom:6px;}
.payment-methods button{margin-bottom:6px;}
#rekDisplay{margin-top:12px; display:flex; flex-direction:column; gap:10px;}

/* Kotak elegan nomor rekening */
.rekCard{
  background: rgba(255,255,255,0.05);
  padding:12px 16px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.1);
  font-weight:600;
  color:#00cc66;
  font-size:15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  backdrop-filter: blur(6px);
}
.rekCard p{margin:0;}
.rekCard .method{font-size:14px; color:rgba(255,255,255,0.7);}
.rekCard .number{font-size:16px; font-weight:700; margin-top:2px;}
</style>
</head>
<body>

<div class="card" id="summaryCard">
  <h2>Ringkasan Pesanan</h2>
  <img id="prodImg" src="" alt="Produk">
  <p><b>Model:</b> <span id="prodName"></span></p>
  <p><b>Storage:</b> <span id="prodStorage"></span></p>
  <p><b>Warna:</b> <span id="prodColor"></span></p>
  <p><b>Harga:</b> <span id="prodPrice"></span></p>
  <hr style="margin:12px 0; border-color: rgba(255,255,255,0.1)">
  <p><b>Nama:</b> <span id="custName"></span></p>
  <p><b>Alamat:</b> <span id="custAddress"></span></p>
  <p><b>Telepon:</b> <span id="custPhone"></span></p>
  <p><b>WhatsApp:</b> <span id="custWA"></span></p>

  <!-- Metode Pembayaran -->
  <div class="payment-methods" id="paymentMethods">
    <p><b>Pilih Metode Pembayaran:</b></p>
    <button class="glass-btn primary" onclick="showQRIS()">QRIS</button>
    <button class="glass-btn primary" onclick="showRek('BRI','5740 0100 6358 507 a.n. JUANDI')">BRI</button>
    <button class="glass-btn primary" onclick="showRek('MANDIRI','XXXXXXXX a.n. XXXXXX (OFFLINE) ')">MANDIRI</button>
    <button class="glass-btn primary" onclick="showRek('SEABANK','901535345930 a.n. JUANDI')">SEABANK</button>
    <button class="glass-btn primary" onclick="showRek('DANA','082110764002')">DANA</button>
    <button class="glass-btn primary" onclick="showRek('OVO','08979694169')">OVO</button>
    <button class="glass-btn primary" onclick="showRek('GOPAY','08979694169')">GOPAY</button>
    <button class="glass-btn primary" onclick="showRek('COD','BAYAR DI TEMPAT')">COD BAYAR DI TEMPAT</button>
    <div id="rekDisplay"></div>
  </div>

  <!-- Tombol WA -->
  <a id="waButton" href="#" target="_blank" class="glass-btn wa">Konfirmasi via WhatsApp (kirim bukti pembayaran)</a>

  <!-- Tombol Sudah Dibayar -->
  <button id="paidButton" class="glass-btn primary">Sudah Dibayar</button>
</div>

<!-- Modal QRIS -->
<div id="paymentModal">
  <div class="modalContent">
    <span id="closeModal">&times;</span>
    <img src="images/qris.jpg" alt="QRIS">
    <p>Scan QRIS untuk pembayaran</p>
  </div>
</div>

<script>
let data = JSON.parse(localStorage.getItem('orderData')) || {};

if(data){
  document.getElementById('prodImg').src = data.img;
  document.getElementById('prodName').textContent = data.model;
  document.getElementById('prodStorage').textContent = data.storage;
  document.getElementById('prodColor').textContent = data.color;
  document.getElementById('prodPrice').textContent = 'Rp '+Number(data.price).toLocaleString('id-ID');
  document.getElementById('custName').textContent = data.nama;
  document.getElementById('custAddress').textContent = data.alamat;
  document.getElementById('custPhone').textContent = data.telepon;
  document.getElementById('custWA').textContent = data.wa;

  const nomorWA = "6281385371544";

  function updateWA(){
    const pesanWA = `Halo kak, saya sudah transfer untuk iPhone berikut.\n\nModel: ${data.model}\nStorage: ${data.storage}\nWarna: ${data.color}\nHarga: Rp ${Number(data.price).toLocaleString('id-ID')}\nMetode Pembayaran: ${data.payment || '-'}\n\nNama: ${data.nama}\nAlamat: ${data.alamat}\nTelepon: ${data.telepon}\nWhatsApp: ${data.wa}\n\nMohon konfirmasi dan saya sudah kirim bukti pembayaran. Terima kasih!`;
    document.getElementById('waButton').href = "https://wa.me/" + nomorWA + "?text=" + encodeURIComponent(pesanWA);
  }

  updateWA();

  // QRIS modal
  const modal = document.getElementById('paymentModal');
  const rekDisplay = document.getElementById('rekDisplay');

  function showQRIS(){
    rekDisplay.innerHTML = '';
    data.payment = 'QRIS';
    localStorage.setItem('orderData', JSON.stringify(data));
    updateWA();
    modal.style.display = 'flex';
  }
  function showRek(method, number){
    modal.style.display = 'none';
    rekDisplay.innerHTML = `
      <div class="rekCard">
        <p class="method">${method}</p>
        <p class="number">${number}</p>
      </div>
    `;
    data.payment = method;
    localStorage.setItem('orderData', JSON.stringify(data));
    updateWA();
  }
  window.showQRIS = showQRIS;
  window.showRek = showRek;

  document.getElementById('closeModal').onclick = function(){
    modal.style.display = 'none';
  }

  const paidBtn = document.getElementById('paidButton');
  paidBtn.addEventListener('click', ()=>{
    paidBtn.textContent = "Pembayaran Tercatat!";
    paidBtn.classList.add('paid');
    const check = document.createElement('span');
    check.className = 'checkmark';
    paidBtn.appendChild(check);
  });

}else{
  document.getElementById('summaryCard').innerHTML = '<p>Tidak ada data pesanan. Silakan kembali ke halaman pemesanan.</p>';
}
</script>
</body>
</html>
